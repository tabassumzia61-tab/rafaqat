<?php $currency_symbol = $this->customlib->getSystemCurrencyFormat(); ?>
<style type="text/css">
    @media print {
        .col-sm-1, .col-sm-2, .col-sm-3, .col-sm-4, .col-sm-5, .col-sm-6, .col-sm-7, .col-sm-8, .col-sm-9, .col-sm-10, .col-sm-11, .col-sm-12 {
            float: left;
        }
        .col-sm-12 {
            width: 100%;
        }
        .col-sm-11 {
            width: 91.66666667%;
        }
        .col-sm-10 {
            width: 83.33333333%;
        }
        .col-sm-9 {
            width: 75%;
        }
        .col-sm-8 {
            width: 66.66666667%;
        }
        .col-sm-7 {
            width: 58.33333333%;
        }
        .col-sm-6 {
            width: 50%;
        }
        .col-sm-5 {
            width: 41.66666667%;
        }
        .col-sm-4 {
            width: 33.33333333%;
        }
        .col-sm-3 {
            width: 25%;
        }
        .col-sm-2 {
            width: 16.66666667%;
        }
        .col-sm-1 {
            width: 8.33333333%;
        }
        .col-sm-pull-12 {
            right: 100%;
        }
        .col-sm-pull-11 {
            right: 91.66666667%;
        }
        .col-sm-pull-10 {
            right: 83.33333333%;
        }
        .col-sm-pull-9 {
            right: 75%;
        }
        .col-sm-pull-8 {
            right: 66.66666667%;
        }
        .col-sm-pull-7 {
            right: 58.33333333%;
        }
        .col-sm-pull-6 {
            right: 50%;
        }
        .col-sm-pull-5 {
            right: 41.66666667%;
        }
        .col-sm-pull-4 {
            right: 33.33333333%;
        }
        .col-sm-pull-3 {
            right: 25%;
        }
        .col-sm-pull-2 {
            right: 16.66666667%;
        }
        .col-sm-pull-1 {
            right: 8.33333333%;
        }
        .col-sm-pull-0 {
            right: auto;
        }
        .col-sm-push-12 {
            left: 100%;
        }
        .col-sm-push-11 {
            left: 91.66666667%;
        }
        .col-sm-push-10 {
            left: 83.33333333%;
        }
        .col-sm-push-9 {
            left: 75%;
        }
        .col-sm-push-8 {
            left: 66.66666667%;
        }
        .col-sm-push-7 {
            left: 58.33333333%;
        }
        .col-sm-push-6 {
            left: 50%;
        }
        .col-sm-push-5 {
            left: 41.66666667%;
        }
        .col-sm-push-4 {
            left: 33.33333333%;
        }
        .col-sm-push-3 {
            left: 25%;
        }
        .col-sm-push-2 {
            left: 16.66666667%;
        }
        .col-sm-push-1 {
            left: 8.33333333%;
        }
        .col-sm-push-0 {
            left: auto;
        }
        .col-sm-offset-12 {
            margin-left: 100%;
        }
        .col-sm-offset-11 {
            margin-left: 91.66666667%;
        }
        .col-sm-offset-10 {
            margin-left: 83.33333333%;
        }
        .col-sm-offset-9 {
            margin-left: 75%;
        }
        .col-sm-offset-8 {
            margin-left: 66.66666667%;
        }
        .col-sm-offset-7 {
            margin-left: 58.33333333%;
        }
        .col-sm-offset-6 {
            margin-left: 50%;
        }
        .col-sm-offset-5 {
            margin-left: 41.66666667%;
        }
        .col-sm-offset-4 {
            margin-left: 33.33333333%;
        }
        .col-sm-offset-3 {
            margin-left: 25%;
        }
        .col-sm-offset-2 {
            margin-left: 16.66666667%;
        }
        .col-sm-offset-1 {
            margin-left: 8.33333333%;
        }
        .col-sm-offset-0 {
            margin-left: 0%;
        }
        .visible-xs {
            display: none !important;
        }
        .hidden-xs {
            display: block !important;
        }
        table.hidden-xs {
            display: table;
        }
        tr.hidden-xs {
            display: table-row !important;
        }
        th.hidden-xs,
        td.hidden-xs {
            display: table-cell !important;
        }
        .hidden-xs.hidden-print {
            display: none !important;
        }
        .hidden-sm {
            display: none !important;
        }
        .visible-sm {
            display: block !important;
        }
        table.visible-sm {
            display: table;
        }
        tr.visible-sm {
            display: table-row !important;
        }
        th.visible-sm,
        td.visible-sm {
            display: table-cell !important;
        }


    }
    .main{
            width: 100%;
            float: left;
            background-color:#FFF;
            color: #000; 
        }
        .main .main-warp{
            width: 100%;
            float: left;
            background-color:#FFF;
            color: #000; 
        }
        .main .main-warp .first-warp{
            width: 100%;
            float: left;
        }
        .main .main-warp .first-warp .first-warp-content{
            width: 100%;
            float: left;
            border:1px solid #000; 
        }
        h2.name{
            font-size: 1.4em;
            font-weight: normal;
            margin: 0;
            padding: 0;
            color: #000;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            border-spacing: 0;
            color: #000;
            background-color: #FFF;
            border: 1px solid #000;
        }

        table th{
            padding: 5px;
            background: #FFF;
            text-align: center;
            color: #000;
            border: 1px solid #000;
            font-size: 14px;
            font-weight: bold;
        }
        table td {
            padding: 2px;
            background: #FFF;
            color: #000;
            text-align: center;
            font-size: 14px;
            border: 1px solid #000;
        }

        table th {
            white-space: nowrap;
            font-weight: normal;
        }
</style>
<main class="main">
    <div class="main-warp">
        <div class="first-warp">
            <div class="first-warp-content">
                <div style="width: 100%;float: left;padding: 20px 0;">
                    <div style="width: 15%;float: left;text-align: center;">
                        <img style="height:70px;margin-top: 10px;margin-bottom: 10px;" src="<?php echo base_url(); ?>uploads/system_content/logo/<?php echo $settinglist->image; ?>" />
                    </div>
                    <div style="width: 70%;float: left;text-align: center;">
                        <h1 style="margin:5px 0px 0px 0px;padding:0px;color:#000;"><?php echo $settinglist->name; ?></h1>
                        <div style="font-weight: bold;font-size: 12px;"><?php echo $settinglist->phone; ?></div>
                        <div style="font-weight: bold;font-size: 12px;"><?php echo $settinglist->address; ?></div>
                        <div style="font-weight: bold;font-size: 12px;"><?php echo 'Cusomter Ledger'; ?></div>
                    </div>
                    <div style="width: 15%;float: left;text-align: center;">
                    </div>
                </div>
                <div style="width: 100%;float: left;padding-bottom: 5px;">
                    <div style="width: 100%;float: left;padding:0 15px 0 15px;">
                        <!--<div style="width: 100%;float: left;padding: 5px 5px 5px 5px;border: 1px solid #000; background: #000;color:#000;"><b><?php echo 'Cusomter ';?></b></div>-->
                        <div style="width: 100%;float: left;padding: 5px 5px 5px 5px;">
                            <div style="width: 50%;float: left;">
                                <b><?php echo 'Company Name: ';?></b> <?php echo $customer['company']; ?>
                            </div>
                            <div style="width: 50%;float: left;">
                                <b><?php echo 'Name: ';?></b> <?php echo $customer['name'].' '.$customer['surname']; ?>
                            </div>
                        </div>
                        <div style="width: 100%;float: left;padding: 5px 5px 5px 5px;">
                            <div style="width: 33%;float: left;">
                                <b><?php echo 'Address: ';?></b> <?php echo $customer['address']; ?>
                            </div>
                            <div style="width: 33%;float: left;">
                                <b><?php echo 'E-mail: ';?></b>  <?php echo $customer['email']; ?>
                            </div>
                            <div style="width: 33%;float: left;">
                                <b><?php echo 'Phone: ';?></b>   <?php echo $customer['phone']; ?>
                            </div>
                        </div>
                    </div>
                </div>
                <div style="width: 100%;float: left;padding-bottom: 5px;">
                    <div style="width: 100%;float: left;padding:0 15px 0px  15px;">
                        Period ( <?php echo date('d F, Y', strtotime($date_from)) ?> to <?php echo date('d F, Y', strtotime($date_to)); ?> )
                    </div>
                </div>
                <div style="width: 100%;float: left;padding-bottom: 5px;">
                    <div style="width: 100%;float: left;padding:0 15px 15px 15px;">
                        <table>
                            <thead>
                                <tr>
                                    <th style="padding:3px;font-size: 12px"><b><?php echo 'Sr.#'; ?></b></th>
                                    <th style="padding:3px;font-size: 12px"><b><?php echo $this->lang->line('date') ?></b></th>
                                    <th style="padding:3px;font-size: 12px"><b><?php echo $this->lang->line('document_no'); ?></b></th>
                                    <th style="padding:3px;font-size: 12px"><b><?php echo $this->lang->line('description'); ?></b></th>
                                    <th style="padding:3px;font-size: 12px"><b><?php echo $this->lang->line('debit') ?></b></th>
                                    <th style="padding:3px;font-size: 12px"><b><?php echo $this->lang->line('credit') ?></b></th>
                                    <th style="padding:3px;font-size: 12px"><b><?php echo $this->lang->line('balance') ?></b></th>
                                </tr>
                            </thead>
                            <tbody id="debit">
                                <tr>
                                    <td style="padding:3px;font-size: 12px"></td>
                                    <td style="padding:3px;font-size: 12px"></td>
                                    <td style="padding:3px;font-size: 12px"> </td>
                                    <td style="text-align: right;padding:3px;font-size: 12px"><b><?php echo $this->lang->line('opening_balance'); ?></b></td>
                                    <td style="text-align: right;padding:3px;font-size: 12px">0</td>
                                    <td style="text-align: right;padding:3px;font-size: 12px">0</td>
                                    <td style="text-align: right;padding:3px;font-size: 12px"><b><?php echo number_format($balam, 2, '.', ','); ?></b></td>
                                </tr>
                                <?php 
                                    if(!empty($ledgerlist)){
                                        $counter = 1;
                                        $total_debit_amount = 0;
                                        $total_credit_amount = 0;
                                        array_multisort(array_column($ledgerlist, 'date'), SORT_ASC, $ledgerlist);
                                        foreach($ledgerlist as $led_key => $led_val){ ?>
                                            <tr>
                                                <td style="padding:3px;font-size: 12px"><?php echo $counter; ?></td>
                                                <td style="padding:3px;font-size: 12px"><?php if(!empty($led_val['date']) && $led_val['date'] !='0000-00-00'){  echo date($this->customlib->getSystemDateFormat(), $this->customlib->dateyyyymmddTodateformat($led_val['date'])); } ?></td>
                                                <td style="padding:3px;font-size: 12px"><?php echo $led_val['bill_no']; ?></td>
                                                <td style="padding:3px;font-size: 12px"><?php echo $led_val['note']; ?></td>
                                                <td style="text-align: right;padding:3px;font-size: 12px" class="total_debit">
                                                    <?php 
                                                        if(!empty($led_val['amount'])){
                                                            $total_debit_amount = $total_debit_amount + $led_val['amount'];
                                                            echo number_format($led_val['amount'], 2, '.', ','); 
                                                        } 
                                                    ?>
                                                </td>
                                                <td style="text-align: right;padding:3px;font-size: 12px" class="total_credit">
                                                    <?php 
                                                        if(!empty($led_val['paid_amount'])){ 
                                                            $total_credit_amount = $total_credit_amount + $led_val['paid_amount'];
                                                            echo number_format($led_val['paid_amount'], 2, '.', ','); 
                                                        } 
                                                    ?>
                                                </td>
                                                <td style="text-align: right;font-weight:bold;padding:3px;font-size: 12px" class="balance">
                                                    <b><?php echo number_format($balam + $total_debit_amount - $total_credit_amount, 2, '.', ','); ?></b>
                                                </td>
                                            </tr>
                                    <?php $counter++; } ?>
                                    <tr style="background-color:#C0C0C0;">
                                        <td style="text-align: right;font-weight:bold" colspan="4"><?php echo $this->lang->line('grand_total'); ?> :</td>
                                        <td style="text-align: right;font-weight:bold" class="total_debit_amount"><?php echo number_format($total_debit_amount, 2, '.', ','); ?></td>
                                        <td style="text-align: right;font-weight:bold" class="total_credit_amount"><?php echo number_format($total_credit_amount, 2, '.', ','); ?></td>
                                        <td style="text-align: right;font-weight:bold" class="total_balance_amount"><?php echo number_format($total_debit_amount - $total_credit_amount, 2, '.', ','); ?></td>
                                    </tr>
                                <?php } ?>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>